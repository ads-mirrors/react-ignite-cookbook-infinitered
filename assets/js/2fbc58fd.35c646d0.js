"use strict";(self.webpackChunkignite_cookbook=self.webpackChunkignite_cookbook||[]).push([[3132],{2736:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var s=o(7624),i=o(2172);const t={title:"Choosing the right monorepo strategy for your project",description:"This document outlines the advantages and challenges of adopting a monorepo strategy for software development projects, particularly in the context of React Native and the Ignite framework. It provides guidance on when to use or avoid a monorepo, explores common monorepo tools, and discusses typical setups to help teams select the most suitable approach for their needs.",tags:["Monorepo","Yarn"],last_update:{author:"Felipe Pe\xf1a"}},r="Choosing the right monorepo strategy for your project",a={id:"recipes/MonoreposOverview",title:"Choosing the right monorepo strategy for your project",description:"This document outlines the advantages and challenges of adopting a monorepo strategy for software development projects, particularly in the context of React Native and the Ignite framework. It provides guidance on when to use or avoid a monorepo, explores common monorepo tools, and discusses typical setups to help teams select the most suitable approach for their needs.",source:"@site/docs/recipes/MonoreposOverview.md",sourceDirName:"recipes",slug:"/recipes/MonoreposOverview",permalink:"/docs/recipes/MonoreposOverview",draft:!1,unlisted:!1,tags:[{label:"Monorepo",permalink:"/docs/tags/monorepo"},{label:"Yarn",permalink:"/docs/tags/yarn"}],version:"current",lastUpdatedBy:"Felipe Pe\xf1a",lastUpdatedAt:1733263687,formattedLastUpdatedAt:"Dec 3, 2024",frontMatter:{title:"Choosing the right monorepo strategy for your project",description:"This document outlines the advantages and challenges of adopting a monorepo strategy for software development projects, particularly in the context of React Native and the Ignite framework. It provides guidance on when to use or avoid a monorepo, explores common monorepo tools, and discusses typical setups to help teams select the most suitable approach for their needs.",tags:["Monorepo","Yarn"],last_update:{author:"Felipe Pe\xf1a"}},sidebar:"mainSidebar",previous:{title:"Migrating to MMKV",permalink:"/docs/recipes/MigratingToMMKV"},next:{title:"Patching/Building Android .aar From Source",permalink:"/docs/recipes/PatchingBuildingAndroid"}},c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"When to use a monorepo",id:"when-to-use-a-monorepo",level:2},{value:"When not to use a monorepo",id:"when-not-to-use-a-monorepo",level:2},{value:"Common monorepo tools",id:"common-monorepo-tools",level:2},{value:"Dependency managers",id:"dependency-managers",level:3},{value:"Build systems",id:"build-systems",level:3},{value:"Common monorepo setups for software apps",id:"common-monorepo-setups-for-software-apps",level:2},{value:"Frontend apps and packages",id:"frontend-apps-and-packages",level:3},{value:"Frontend and backend in a single monorepo",id:"frontend-and-backend-in-a-single-monorepo",level:3},{value:"Monorepo with multiple microservices",id:"monorepo-with-multiple-microservices",level:3},{value:"Hybrid monorepo (web, mobile, and backend)",id:"hybrid-monorepo-web-mobile-and-backend",level:3},{value:"Library and application in a single monorepo",id:"library-and-application-in-a-single-monorepo",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"choosing-the-right-monorepo-strategy-for-your-project",children:"Choosing the right monorepo strategy for your project"}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"When embarking on a software development project, particularly in the context of React Native and using the Ignite framework, the decision to adopt a monorepo structure is critical. A monorepo can streamline development, foster better code sharing, and simplify dependency management. However, it's not a one-size-fits-all solution. This document explores when you should consider using a monorepo, when you might want to avoid it, the most common monorepo options available, and typical setups for software applications."}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-a-monorepo",children:"When to use a monorepo"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code sharing across multiple projects"}),": If your project involves multiple apps or services that share a significant amount of code, a monorepo can help ensure that these shared components are consistent across all projects. This is particularly beneficial for UI components, utility functions, or custom logic."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Unified CI/CD pipeline"}),": A monorepo allows you to manage a single CI/CD pipeline, simplifying the automation process. This is useful when you want to ensure that all parts of your application are tested and deployed together, reducing the risk of version mismatches."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Simplified dependency management"}),": Managing dependencies across multiple repositories can be complex and error-prone. With a monorepo, you can centralize dependency management, making it easier to maintain consistency and avoid version conflicts."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Synchronous release cycles"}),": If your apps or services need to be released together, a monorepo makes it easier to coordinate these releases. This is often the case in large-scale enterprise applications where different parts of the system are closely interconnected."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Small to medium-sized teams"}),": Monorepos work well for small to medium-sized teams. With everyone working in the same repository, it\u2019s easier to collaborate, share code, and stay aligned on changes."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"when-not-to-use-a-monorepo",children:"When not to use a monorepo"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Large and unrelated projects"}),": If your projects are large and unrelated, a monorepo can become unwieldy. The repository size might grow excessively, and it can become difficult to manage unrelated codebases together, leading to longer CI/CD times and more complex build processes."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Different lifecycles"}),": When different projects have significantly different release cycles or stability requirements, maintaining them in a monorepo can introduce unnecessary complexity. For example, if one service is in active development while another is in maintenance mode, separate repositories might be more appropriate."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Security concerns"}),": If your projects require different access controls or have varying levels of security requirements, a monorepo might not be suitable. Ensuring that sensitive parts of the codebase are protected can be more challenging in a monorepo setup."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Large, distributed teams"}),": For large, distributed teams, a monorepo can become hard to manage. With many contributors, the repository can grow quickly, leading to longer build times and more complicated merges. In these cases, using separate repositories might be better, allowing different teams to work independently without slowing each other down."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-monorepo-tools",children:"Common monorepo tools"}),"\n",(0,s.jsx)(n.p,{children:"Existing monorepo tools can be divided in two types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Dependency managers"}),"\n",(0,s.jsx)(n.li,{children:"Build systems"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Let's talk about each of them."}),"\n",(0,s.jsx)(n.h3,{id:"dependency-managers",children:"Dependency managers"}),"\n",(0,s.jsx)(n.p,{children:"A dependency manager is a tool that automates the installation and management of a project's required libraries, ensuring compatibility and consistency."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Tool"}),(0,s.jsx)(n.th,{children:"Pros"}),(0,s.jsx)(n.th,{children:"Cons"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://yarnpkg.com/features/workspaces",children:"Yarn Workspaces"})}),(0,s.jsxs)(n.td,{children:["Built-in support for monorepos. ",(0,s.jsx)("br",{}),"Simplifies dependency management across packages. ",(0,s.jsx)("br",{}),"Excellent community support and documentation."]}),(0,s.jsxs)(n.td,{children:["Can be complex to configure initially. ",(0,s.jsx)("br",{}),"Some issues with peer dependencies."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://pnpm.io/",children:"Pnpm"})}),(0,s.jsxs)(n.td,{children:["Efficient disk space usage with unique package storage. ",(0,s.jsx)("br",{}),"Fast installation times. ",(0,s.jsx)("br",{}),"Built-in support for monorepos."]}),(0,s.jsxs)(n.td,{children:["Less mainstream adoption, leading to potential issues with community support. ",(0,s.jsx)("br",{}),"Some tooling might not fully support Pnpm yet."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://lerna.js.org/",children:"Lerna"})}),(0,s.jsxs)(n.td,{children:["Great for managing multi-package repositories. ",(0,s.jsx)("br",{}),"Supports independent versioning of packages. ",(0,s.jsx)("br",{}),"Integrates well with Yarn Workspaces."]}),(0,s.jsxs)(n.td,{children:["Stagnant for years, although ",(0,s.jsx)(n.a,{href:"https://www.google.com/url?q=https://blog.nrwl.io/lerna-5-1-new-website-new-guides-new-lerna-example-repo-distributed-caching-support-and-speed-64d66410bec7&sa=D&source=docs&ust=1727362999686773&usg=AOvVaw2QrLSkc_AY7zOgk7Sz_YQM",children:"maintained by Nx now"}),". ",(0,s.jsx)("br",{})," Slower for large codebases. ",(0,s.jsx)("br",{}),"Requires additional configuration for CI/CD."]})]})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Based on our experience, simplicity and community support, ",(0,s.jsx)(n.strong,{children:"we recommend Yarn as a dependency manager"}),"."]})}),"\n",(0,s.jsx)(n.h3,{id:"build-systems",children:"Build systems"}),"\n",(0,s.jsx)(n.p,{children:"A build system automates tasks like compiling code, running tests, and bundling assets, optimizing the development process."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Tool"}),(0,s.jsx)(n.th,{children:"Pros"}),(0,s.jsx)(n.th,{children:"Cons"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://nx.dev/",children:"Nx"})}),(0,s.jsxs)(n.td,{children:["Focuses on improving performance with advanced caching and task scheduling. ",(0,s.jsx)("br",{}),"Great for large-scale enterprise applications."]}),(0,s.jsxs)(n.td,{children:["Steeper learning curve. ",(0,s.jsx)("br",{}),"May be overkill for smaller projects."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://turbo.build/repo/docs/guides/tools",children:"Turborepo"})}),(0,s.jsxs)(n.td,{children:["High performance with built-in caching and parallel task execution. ",(0,s.jsx)("br",{}),"Simplifies monorepo management with minimal configuration."]}),(0,s.jsxs)(n.td,{children:["Less mature ecosystem compared to Yarn or Lerna. ",(0,s.jsx)("br",{}),"Limited tooling support for some workflows."]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"common-monorepo-setups-for-software-apps",children:"Common monorepo setups for software apps"}),"\n",(0,s.jsx)(n.h3,{id:"frontend-apps-and-packages",children:"Frontend apps and packages"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/apps"}),": Contains a set of frontend apps (e.g. React, Electron, React Native)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/packages"}),": Contains shared packages used by frontend apps."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Use case: Ideal for projects that need to manage multiple frontend apps sharing a common set of utilities and packages."}),"\n",(0,s.jsx)(n.h3,{id:"frontend-and-backend-in-a-single-monorepo",children:"Frontend and backend in a single monorepo"}),"\n",(0,s.jsx)(n.p,{children:"Structure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/frontend"}),": Contains the React Native app and other frontend components."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/backend"}),": Contains the server-side code, typically a Node.js or Python backend."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/shared"}),": Contains shared utilities, types, or components used by both frontend and backend."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Use case: Ideal for projects where the frontend and backend are tightly coupled and frequently share code, such as shared type definitions, utility functions, or API clients."}),"\n",(0,s.jsx)(n.h3,{id:"monorepo-with-multiple-microservices",children:"Monorepo with multiple microservices"}),"\n",(0,s.jsx)(n.p,{children:"Structure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/service-auth"}),": Contains the authentication service."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/service-payment"}),": Contains the payment processing service."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/service-notifications"}),": Contains the notification service."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/shared"}),": Contains shared libraries, such as logging or database utilities."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Use case: Suitable for large-scale applications with multiple microservices that need to share common libraries or configurations."}),"\n",(0,s.jsx)(n.h3,{id:"hybrid-monorepo-web-mobile-and-backend",children:"Hybrid monorepo (web, mobile, and backend)"}),"\n",(0,s.jsx)(n.p,{children:"Structure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/web"}),": Contains the web application code, typically built with React or Next.js."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/mobile"}),": Contains the React Native mobile app code."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/backend"}),": Contains the backend services."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/shared"}),": Contains shared components, utilities, or API clients."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Use case: Ideal for projects that need to maintain both web and mobile applications with a shared backend, ensuring that all parts of the system stay in sync."}),"\n",(0,s.jsx)(n.h3,{id:"library-and-application-in-a-single-monorepo",children:"Library and application in a single monorepo"}),"\n",(0,s.jsx)(n.p,{children:"Structure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/library"}),": Contains the core library code, which could be published as an npm package."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/app"}),": Contains the application code that consumes the library."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/docs"}),": Contains documentation for the library and application."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Use case: Best for projects where a core library is being developed alongside an application that consumes it, allowing for rapid iteration and testing."}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"Choosing whether to use a monorepo and selecting the right setup and tool depends on your project's specific needs. Yarn Workspaces is generally the recommended choice due to its balance of simplicity, community support, and effectiveness in managing shared dependencies. However, other options like Lerna, Nx, Turborepo, and Pnpm offer unique advantages that might better suit your project depending on its scale, complexity, and specific requirements."}),"\n",(0,s.jsx)(n.p,{children:"By carefully considering the pros and cons of each option and common monorepo setups, you can select the best strategy to streamline your development process and ensure the long-term maintainability of your codebase."})]})}function p(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2172:(e,n,o)=>{o.d(n,{I:()=>a,M:()=>r});var s=o(1504);const i={},t=s.createContext(i);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);